Version 4.1
SHEET 1 4708 1700
WIRE 1408 -272 1408 -288
WIRE 352 -96 96 -96
WIRE 624 -96 352 -96
WIRE 688 -96 624 -96
WIRE 352 -80 352 -96
WIRE 400 -80 352 -80
WIRE 1296 -80 1136 -80
WIRE 1392 -80 1376 -80
WIRE 1488 -80 1472 -80
WIRE 1568 -80 1488 -80
WIRE 1808 -80 1568 -80
WIRE 2064 -80 2032 -80
WIRE 2272 -80 2240 -80
WIRE 2464 -80 2432 -80
WIRE 352 -64 352 -80
WIRE 624 -64 624 -96
WIRE 2032 -64 2032 -80
WIRE 2240 -64 2240 -80
WIRE 2432 -64 2432 -80
WIRE 1136 -48 1136 -80
WIRE 1296 -48 1296 -80
WIRE 1568 -16 1568 -80
WIRE 128 16 112 16
WIRE 304 16 288 16
WIRE 560 16 560 0
WIRE 576 16 560 16
WIRE 1760 16 1760 0
WIRE 1088 32 1072 32
WIRE 96 48 96 -96
WIRE 624 48 624 32
WIRE 688 48 624 48
WIRE 1248 48 1248 32
WIRE 1568 48 1568 -16
WIRE 352 64 352 32
WIRE 400 64 352 64
WIRE 1488 64 1488 -80
WIRE 1088 80 1040 80
WIRE 1136 80 1136 48
WIRE 1136 80 1088 80
WIRE 352 96 352 64
WIRE 752 96 352 96
WIRE 912 96 832 96
WIRE 944 96 912 96
WIRE 1040 96 1040 80
WIRE 1488 96 1488 64
WIRE 96 112 96 48
WIRE 1808 112 1808 96
WIRE 352 128 352 96
WIRE 624 128 624 48
WIRE 1264 128 1248 128
WIRE 352 144 352 128
WIRE 1568 160 1568 128
WIRE 624 176 624 128
WIRE 752 176 624 176
WIRE 912 176 832 176
WIRE 944 176 912 176
WIRE 1040 192 1040 176
WIRE 1088 192 1040 192
WIRE 1296 192 1296 48
WIRE 1296 192 1088 192
WIRE 1136 208 1136 80
WIRE 1296 208 1296 192
WIRE 624 224 624 176
WIRE 1488 224 1488 160
WIRE 352 256 352 144
WIRE 624 256 624 224
WIRE 1664 256 1616 256
WIRE 1760 256 1744 256
WIRE 1792 256 1760 256
WIRE 1904 256 1872 256
WIRE -160 288 -160 272
WIRE 1616 288 1616 256
WIRE 1088 304 1088 288
WIRE 1248 304 1248 288
WIRE 208 336 176 336
WIRE 304 336 288 336
WIRE 480 336 432 336
WIRE 576 336 560 336
WIRE 1136 336 1136 304
WIRE 1296 336 1296 304
WIRE 1296 336 1136 336
WIRE 1488 336 1488 224
WIRE 1488 336 1296 336
WIRE 1296 368 1296 336
WIRE 96 384 96 192
WIRE 352 384 352 352
WIRE 352 384 96 384
WIRE 624 384 624 352
WIRE 624 384 352 384
WIRE 256 400 240 400
WIRE 448 400 432 400
WIRE 96 416 96 384
WIRE 240 416 240 400
WIRE 432 416 432 400
WIRE 2032 416 2032 384
WIRE 2064 416 2032 416
WIRE 2176 432 2176 384
WIRE 2176 432 2160 432
WIRE 1888 448 1856 448
WIRE 1936 448 1888 448
WIRE 2032 464 2000 464
WIRE 2064 464 2064 416
WIRE 2064 464 2032 464
WIRE 2080 464 2064 464
WIRE 2160 464 2160 432
WIRE 2176 464 2160 464
WIRE 2064 480 2064 464
WIRE -208 496 -208 480
WIRE 2272 544 2272 528
WIRE 2384 544 2384 528
WIRE 256 560 240 560
WIRE 448 560 432 560
WIRE 2064 560 2064 544
WIRE 240 576 240 560
WIRE 432 576 432 560
WIRE 1888 576 1888 448
WIRE 2032 576 2032 464
WIRE -192 640 -208 640
WIRE -208 656 -208 640
WIRE 1376 672 1376 656
WIRE 1472 672 1472 656
WIRE 256 752 240 752
WIRE 448 752 432 752
WIRE 240 768 240 752
WIRE 432 768 432 752
WIRE 256 912 240 912
WIRE 448 912 432 912
WIRE 1376 912 1376 896
WIRE 1472 912 1472 896
WIRE 240 928 240 912
WIRE 432 928 432 912
WIRE 384 1072 336 1072
WIRE 336 1088 336 1072
FLAG 1568 160 0
FLAG 1296 368 0
FLAG 96 416 0
FLAG 96 48 Vin
FLAG 1568 -16 Vout
FLAG 432 336 HighG
FLAG 176 336 LowG
FLAG 352 128 Vm1
FLAG 624 128 Vm2
FLAG 112 16 0
FLAG 560 -160 0
FLAG 2176 464 Vfb
FLAG 1968 416 0
FLAG 2272 624 0
FLAG 2272 528 Vcc
FLAG 1968 480 Vcc
FLAG 2384 624 0
FLAG 2384 528 Vref
FLAG 2000 432 Vref
FLAG 1856 448 U1_out
FLAG 2064 560 0
FLAG 256 400 HighG
FLAG 448 400 LowG
FLAG 240 848 0
FLAG 256 752 Vcontrol
FLAG 912 96 Lpri_top
FLAG 912 176 Lpri_bot
FLAG 1088 80 Lsec_top
FLAG 1088 192 Lsec_bot
FLAG 1136 -80 Lout_bot
FLAG 496 144 0
FLAG 768 224 0
FLAG 240 656 0
FLAG 432 656 0
FLAG -208 576 0
FLAG -208 480 Ton
FLAG 432 496 0
FLAG 240 496 0
FLAG 448 560 LowG_steady
FLAG 256 560 HighG_steady
FLAG 1376 992 0
FLAG 1472 992 0
FLAG 1376 896 SR_top
FLAG 1472 896 SR_bot
FLAG 1088 384 SR_bot
FLAG 1376 752 0
FLAG 1472 752 0
FLAG 1376 656 M5_Gate
FLAG 1472 656 M7_Gate
FLAG 992 32 M5_Gate
FLAG 1264 128 M7_Gate
FLAG 1248 384 SR_top
FLAG 1808 112 0
FLAG 1488 64 Vout_sense
FLAG 1488 224 GND_sense
FLAG 1616 368 0
FLAG 1904 256 0
FLAG 1760 256 Vfb
FLAG 1408 -192 0
FLAG 1408 -288 Isense
FLAG 240 1008 0
FLAG 256 912 Vtrip_soft
FLAG 432 848 0
FLAG 448 752 Vctrl_limited
FLAG 432 1008 0
FLAG 448 912 Vtrip_hard
FLAG 1760 96 0
FLAG -160 368 0
FLAG -160 272 Venable
FLAG -208 736 0
FLAG -192 640 Vovp
FLAG 2032 16 0
FLAG 2064 -80 Vsense
FLAG 2240 16 0
FLAG 2272 -80 Isense_RL
FLAG 2432 16 0
FLAG 2464 -80 N_temp_Sense
FLAG 336 1168 0
FLAG 384 1072 N_temp_derate
SYMBOL nmos 304 -64 R0
WINDOW 3 -116 -2 Left 2
SYMATTR Value IMZ120R030M1H
SYMATTR InstName M1
SYMBOL ind 928 80 R0
SYMATTR InstName Lpri
SYMATTR Value 72µ
SYMATTR SpiceLine Rser=80m
SYMBOL ind 1024 80 R0
SYMATTR InstName Lsec
SYMATTR Value 1.35m
SYMATTR SpiceLine Rser=80m
SYMBOL cap 1472 96 R0
SYMATTR InstName Cout
SYMATTR Value 10µ
SYMBOL nmos 576 -64 R0
WINDOW 3 -102 68 Left 2
SYMATTR InstName M2
SYMATTR Value IMZ120R030M1H
SYMBOL nmos 576 256 R0
SYMATTR InstName M4
SYMATTR Value IMZ120R030M1H
SYMBOL nmos 304 256 R0
WINDOW 3 -44 -19 Left 2
SYMATTR Value IMZ120R030M1H
SYMATTR InstName M3
SYMBOL bv 560 -64 R180
WINDOW 0 24 96 Left 2
WINDOW 3 -299 68 Left 2
SYMATTR InstName B2
SYMATTR Value V= V(Vm2) + V(LowG)
SYMBOL bv 224 16 R90
WINDOW 0 -32 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName B3
SYMATTR Value V= V(Vm1) + V(HighG)
SYMBOL res 576 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 1
SYMBOL res 304 320 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 1
SYMBOL res 576 16 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R3
SYMATTR Value 1
SYMBOL res 304 0 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1
SYMBOL OpAmps\\UniversalOpAmp2 1968 448 R180
SYMATTR InstName U1
SYMBOL voltage 2272 528 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 1.1
SYMBOL res 1984 560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 15k
SYMBOL cap 2032 560 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 8.2n
SYMBOL res 2176 448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 5k
SYMBOL cap 2048 480 R0
WINDOW 3 24 68 Left 2
SYMATTR Value 680p
SYMATTR InstName C3
SYMBOL ind 1280 -64 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Lout
SYMATTR Value 2.2m
SYMBOL ind 736 112 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Lboost1
SYMATTR Value 0.9µ
SYMBOL ind 736 192 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 5 56 VBottom 2
SYMATTR InstName Lboost2
SYMATTR Value 0.9µ
SYMBOL bv 240 752 R0
WINDOW 3 -12 124 Left 2
WINDOW 0 33 23 Left 2
SYMATTR Value V = V(U1_out)
SYMATTR InstName B5
SYMBOL cap 2176 368 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 820p
SYMBOL res 2128 368 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R9
SYMATTR Value 1.5k
SYMBOL res 448 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 5
SYMBOL cap 496 128 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C8
SYMATTR Value 100p
SYMBOL res 720 208 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 5
SYMBOL cap 768 208 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C9
SYMATTR Value 100p
SYMBOL bv 240 560 R0
WINDOW 3 -135 147 Left 2
WINDOW 0 31 26 Left 2
SYMATTR Value V = if(mod(time, 12.5u) > (V(Ton) + 2*td), if(mod(time, 12.5u) < (V(Ton) + 2*td + V(Ton)), 12, 0), 0)
SYMATTR InstName B1
SYMBOL bv 432 560 R0
WINDOW 3 -150 121 Left 2
WINDOW 0 29 25 Left 2
SYMATTR Value V = if(mod(time, 12.5u) > td, if(mod(time, 12.5u) < (V(Ton) + td), 12, 0), 0)
SYMATTR InstName B4
SYMBOL bv -208 480 R0
SYMATTR InstName B6
SYMATTR Value V = min(V(Vctrl_limited)*5.9u, 5.9u)
SYMBOL bv 240 400 R0
WINDOW 3 -5 121 Left 2
WINDOW 0 24 23 Left 2
SYMATTR Value V = if(V(Vtrip_hard) < 0.5, V(HighG_steady)*V(Venable)*V(Vovp)*V(N_temp_derate), 0)
SYMATTR InstName B11
SYMBOL bv 432 400 R0
WINDOW 3 -3 97 Left 2
WINDOW 0 22 23 Left 2
SYMATTR Value V = if(V(Vtrip_hard) < 0.5, V(LowG_steady)*V(Venable)*V(Vovp)*V(N_temp_derate), 0)
SYMATTR InstName B12
SYMBOL voltage 96 96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName Vin
SYMATTR Value PWL(0 0 5m 100)
SYMBOL nmos 1088 208 R0
WINDOW 3 13 2 Left 2
SYMATTR Value IMZ120R030M1H
SYMATTR InstName M6
SYMBOL nmos 1248 208 R0
WINDOW 3 51 96 Left 2
SYMATTR Value IMZ120R030M1H
SYMATTR InstName M8
SYMBOL bv 1472 896 R0
SYMATTR InstName B13
SYMATTR Value V = if(delay(V(LowG), 155n) > 6, 12, 0)
SYMBOL bv 1376 896 R0
WINDOW 3 -8 128 Left 2
SYMATTR Value V = if(delay(V(HighG), 155n) > 6, 12, 0)
SYMATTR InstName B14
SYMBOL res 1264 400 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R12
SYMATTR Value 2
SYMBOL res 1104 400 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R13
SYMATTR Value 2
SYMBOL bv 1472 656 R0
SYMATTR InstName B15
SYMATTR Value V = V(Lsec_bot) + V(SR_bot)
SYMBOL bv 1376 656 R0
WINDOW 3 -5 128 Left 2
SYMATTR Value V = V(Lsec_top) + V(SR_top)
SYMATTR InstName B16
SYMBOL nmos 1088 -48 R0
WINDOW 3 -67 3 Left 2
SYMATTR Value IMZ120R030M1H
SYMATTR InstName M5
SYMBOL nmos 1248 -48 R0
WINDOW 3 6 60 Left 2
SYMATTR Value IMZ120R030M1H
SYMATTR InstName M7
SYMBOL res 1232 32 R0
SYMATTR InstName R14
SYMATTR Value 2
SYMBOL res 1088 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 2
SYMBOL nmos 1760 -80 R0
SYMATTR InstName M9
SYMATTR Value NMOS_bleed
SYMBOL res 1792 0 R0
SYMATTR InstName Rbleed
SYMATTR Value 10k
SYMBOL bv 1760 0 R0
WINDOW 0 -47 -5 Left 2
WINDOW 3 -6 130 Left 2
SYMATTR InstName B17
SYMATTR Value V = if(V(Vcontrol) < 0.5, 10, 0)
SYMBOL bv 1616 272 R0
WINDOW 0 1 11 Left 2
SYMATTR InstName Bdiff
SYMATTR Value V = V(Vout_sense) - V(GND_sense)
SYMBOL res 1760 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 199k
SYMBOL res 1888 240 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res 1488 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName Rsense
SYMATTR Value 10m
SYMBOL bv 1408 -288 R0
SYMATTR InstName B18
SYMATTR Value V = I(Rsense) * 1
SYMBOL bv 240 912 R0
WINDOW 3 -9 122 Left 2
WINDOW 0 28 25 Left 2
SYMATTR Value V = if(V(Isense) > -1.8,1, 1 + 0.15*(V(Isense)*1.8))
SYMATTR InstName B7
SYMBOL bv 432 752 R0
WINDOW 0 40 27 Left 2
SYMATTR InstName B19
SYMATTR Value V = V(Vcontrol)*V(Vtrip_soft)
SYMBOL bv 432 912 R0
WINDOW 0 33 25 Left 2
SYMATTR InstName B20
SYMATTR Value V = if(V(Isense) > -2, 0, 1)
SYMBOL res 1552 32 R0
SYMATTR InstName Rload
SYMATTR Value 533.33
SYMBOL res 672 -112 R0
SYMATTR InstName R17
SYMATTR Value 10
SYMBOL cap 672 -16 R0
SYMATTR InstName C4
SYMATTR Value 100p
SYMBOL res 384 -96 R0
SYMATTR InstName R16
SYMATTR Value 10
SYMBOL cap 384 0 R0
SYMATTR InstName C5
SYMATTR Value 100p
SYMBOL bv -160 272 R0
SYMATTR InstName B8
SYMATTR Value V = if(V(Vin) > 10, 1, 0)
SYMBOL voltage 2384 528 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value PWL(0 0 2m 1 3m 2)
SYMBOL bv -208 640 R0
WINDOW 0 21 22 Left 2
SYMATTR InstName B9
SYMATTR Value V = if(V(Vout) > 410, 0, 1)
SYMBOL bv 2032 -80 R0
SYMATTR InstName B10
SYMATTR Value V = V(Vout)
SYMBOL bv 2240 -80 R0
SYMATTR InstName B21
SYMATTR Value V = I(Rload)
SYMBOL bv 2432 -80 R0
SYMATTR InstName B22
SYMATTR Value V = 25 + 0.5*(I(Rload)*V(Vout))
SYMBOL bv 336 1072 R0
WINDOW 0 29 23 Left 2
SYMATTR InstName B23
SYMATTR Value V = if(V(N_temp_sense) < 180, 1,if(V(N_temp_sense) < 190, 1 - (V(N_temp_sense)-180)*0.01333,if(V(N_temp_sense) < 200, 0.8 - (V(N_temp_sense)-190)*0.05, 0.3)))
TEXT 1728 -280 Left 2 !K1 Lpri Lsec 0.995
TEXT 3176 -920 Left 2 !.meas Pin AVG (V(Vin)*I(Vin)) FROM 9ms TO 10ms\n.meas Pout AVG (V(Vout)*I(Rload)) FROM 9ms TO 10ms\n.measure Efficiency PARAM 100*Pout/Pin
TEXT -480 952 Left 2 !.tran 0 10m 0 10n uic
TEXT -480 1000 Left 2 !.options abstol=1u reltol=0.01 vntol=1m\n.options cshunt=1p\n.options numdgt=5\n.options plotwinsize=0\n.options maxord=2
TEXT 3184 -536 Left 2 !.meas P_Lpri AVG (V(Lpri_top, Lpri_bot)*I(Lpri)) FROM 9m TO 10m\n.meas P_Lsec AVG (V(Lsec_top, Lsec_bot)*I(Lsec)) FROM 9m TO 10m
TEXT 1728 -256 Left 2 !.param td=300n
TEXT -272 -288 Left 2 !.model IMZ120R030M1H VDMOS (Vto=3.1 Bv=1200 Ron=0.030 Rg=1.0 Cgdmax=100p Cgdmin=15p Cgs=750p Cjo=300p Qg=34n)
TEXT -272 -232 Left 2 !.model NMOS_bleed VDMOS (Vto=2 Ron=0.05)
TEXT -272 -264 Left 2 !.model Dclamp_model D (Is=1e-9 N=1 BV=1200 Rs=0.1 Cjo=2p)
TEXT 3184 -736 Left 2 !.meas Vout_avg avg(V(Vout)) from=9m to=10m\n.meas Iin avg I(Vin) from=9m to=10m
TEXT 3184 -640 Left 2 !.meas Vout_max max V(Vout) from=9m to=10m\n.meas Vout_min min V(Vout) from=9m to=10m\n.meas V_ripple param Vout_max - Vout_min
